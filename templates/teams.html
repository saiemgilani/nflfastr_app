{% extends "layout.html" %}

{% block main %}

    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.css">
        <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.js"></script>
        <script src="https://cdn.datatables.net/buttons/1.6.5/js/dataTables.buttons.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/1.6.5/js/buttons.flash.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
        <script src="https://cdn.datatables.net/buttons/1.6.5/js/buttons.html5.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/1.6.5/js/buttons.print.min.js"></script>
        <script src="static/datatables.js"></script>
    </head>

    <b>Query: </b>{{ searchdesc }}
    <hr>
    <table id="table_id" class="cell-border compact stripe">
        <thead>
            <tr>
                <th>Rank</th>
                <th>{{ sort[1] }}</th>
                <th>{{ groupings[grouping] }}</th>
                <th>Plays</th>
                <th>Expected Points Added</th>
                <th>Success Rate</th>
            </tr>
        </thead>
        <tbody>
            {% for play in plays %}
                {% if play.total >= minplays %}
                    <tr>
                        <td></td>
                        {% if sort[0] != 'week' %}
                            <td>{{ '%0.2f'|format(play[sort[0]]|float) }}</td>
                        {% else %}
                            <td>{{ '%0.2f'|format(play['WEEK']|float) }}</td>
                        {% endif %}
                        <td>{{ play[grouping] }}</td>
                        <td>{{ play.total }}</td>
                        <td>{{ '%0.2f'|format(play.epa) }}</td>
                        <td>{{ '%0.2f'|format(play.success) }}</td>
                    </tr>
                {% endif %}
            {% endfor %}
        </tbody>
    </table>
{% endblock %}